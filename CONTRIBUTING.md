# Contributing

CookieCaster 3.0 is an open source project and lives from your ideas and contributions.

There are many ways to contribute, from improving the documentation, submitting bug reports and features requests or writing code to add enhancements or fix bugs.

#### Table of Contents

## Introduction

This section will explain how the branching concept of this project is. The developer has to follow this concept, so a clean contribution is guranteed.

Please consider the [open issues](https://github.com/fhnw-makerverse/cookiecaster/issues) when you start contributing to the project. Issues labeled with help wanted or good first issue will help you get started more easily.

Before starting your work on CookieCaster 3.0, you should create a branch to the project. The branches need to follow a specific concept. When your changes are complete, submit a pull request. All pull requests will be reviewed and merged if they suit some general guidelines:

- Branch follows the concept
- For new functionality, proper tests are written
- Changes should follow the existing coding style and standards
- Changes are visible in the commit message, so a Changelog can be written

Please continue reading in the following sections for a step by step guide.

## Branching Concept
### Important Branches
#### main Branch
There should be no direct pushes on the main branch. The code in the main branch is the productive code that runs on GitHub Pages

#### gh-pages Branch
This Branch is used to provide the GitHub Page for Cookiecaster. No manual pushes by a contributer are done.
The GitHub Page is automatically updated when a release (see: [Releasing](docs/releasing-strategy.md)) is being done. 
Happens all in CI/CD. This Branch only contains ressources needed by GitHub Pages for CookieCaster and are generated by the `yarn deploy`command.

#### development Branch
This is a fork of the main branch which contains all the developed new features, fixes, improvements for CookieCaster 3.0. Always ahead of the main Branch. From this Branch is the release Branch forked, which releases the new version into main. 

When developing a new feature, doc, fix etc... a subbranch from development is created and when finished merged back to development. 

### Branching
How to name branches when forking from the development branch. 

| Branchname | Description | Example |
|----------|----------|----------|
|`feature/*` | Develop a new feature for CookieCaster | `feature/share` |
| `fix/*`| Develop a fix for an existing feature | `fix/drawingCurves` |
| `docs/*`| Develop or adjust a documentation | `docs/metrics`Â |
| `chore/*`| CleanUp Tasks or Changes on CI | `chore/addCITests` |
| `release/*`| Create a new productive Release of CookieCaster | `release/v1.0.3`|

## CI/CD
This section explains how CI/CD is used for developing

### Developing

When developing CookieCaster on every pull request to main or development branch, GitHub Actions will execute the test cases. Also there will be done some code quality and style checks with respective articfacts. 

Additionaly on every pull request or push to development or main branch a code coverage report will be generated in the artifacts and a badge with the coverage percentage will be added to the ReadMe. 

When merging the reviewer sees if the tests and checks have passed and is obligates that they are green.

### Releasing

For every merge from a release Branch to developmet the action will update the version in the `package.json` and again trigger all checks. 

When merging from development to main all checks are triggered again. After the successfull merge to main and with VERSION.md changed a new Tag  with a GitHub Release will be created. Then the GitHub Pages will be deployed.

## How to review

A short description how the reviewer should check before merging. 

- Check if all pipelines in the Pull Request are green
- Clone branch locally and run `yarn run dev`
- Check locally if page works as expected
- Check if branching concept is being used
- Check if commit messages contain all informations so a proper Changelog can be written in a release

If everything is okay the Pull Request can be merged. 

## Merging to main

Following merge into main is allowed

### development to main
Only merges from development to main. If there are no changes to VERSION.md no new version is released, so only the main branch is updates. If VERSION.md is updated a new release and deployment is triggered. 

## Merging release
### release to developmet
When creating a release, fork the development branch with the branchname `release/vx.y.z`. Adjust VERSION.md with the new Version. Create PR to development. Only use this when a new version of CookieCaster with new fixes and features should be released. 
