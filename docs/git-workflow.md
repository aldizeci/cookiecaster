# Branching Concept
## Introduction
This section will explain how the branching concept of this project is. The developer has to follow this concept, so a clean contribution is guranteed. 

## Protected Branches
### main Branch
The Main Branch is protected so no direct pushes on the main branch are allowed. The code in the main branch is the productive code that runs on GitHub Pages

### gh-pages Branch
This Branch is used to provide the GitHub Page for Cookiecaster. No manual pushes by a contributer are done.
The GitHub Page is automatically updated when a release (see: [Releasing](releasing-strategy.md)) is being done. 
Happens all in CI/CD. This Branch only contains ressources needed by GitHub Pages for CookieCaster and are generated by the `yarn gh-page`command.

### development Branch
This is a fork of the main branch which contains all the developed new features for CookieCaster. Always ahead of the main Branch. From this Branch is the release Branch forked, which releases the new version into main. If merged directly to main, then it is because of chore, ci or documentation adjustments. 

When developing a new feature, doc, fix etc... a sub branch from development is created and when finished merged back to development. 

## Branching
How to name branches when forking from the development branch. 

| Branchname | Description | Example |
|----------|----------|----------|
|`feature/*` | Develope a new feature for CookieCaster | `feature/share` |
| `fix/*`| Develop a fix for an existing feature | `fix/drawingCurves` |
| `docs/*`| Develop or adjust a documentation | `docs/metrics`Â |
| `chore/*`| CleanUp Tasks or Changes on CI | `chore/addCITests` |
| `release/*`| Create a new productive Release of CookieCaster | `release/v1.0.3`|

## CI/CD
This section explains how CI/CD is used for developing

### Developing

When developing CookieCaster on every push on your Branch GitHub Actions will check if some calculations needed for the CookieCaster still work. Also there will be done some code quality and style checks with respective articfacts. 

When merging the reviewer sees if the tests and checks have passed.

### Releasing
For every merge from a release Branch to main the action will create a new Tag Version with a Changelog and publish the uopdates CookieCaster on GitHub Pages. 

## How to review

A short description how the reviewer should check before merging. 

- Check if Pipeline in Pull Request is green
- Clone branch locally and run `yarn preview`
- Check locally if page works as expected
- Check if branching concept is being used

If everything is okay the Pull Request can be merged. 

## Merging to main

Following two merges into main are allowed

### development to main
Should only be done, when there are no functional changes like docs and chore work. Because a new version is only deployed, when merging from a release branch and the VERSION.md is adjusted. 

### release to main
When releasing fork the development branch with the branchname `release/vx.y.z`. Adjust VERSION.md with the new Version. Create PR to main and development, so both have the same VERSION.md. Only use this when a new version of CookieCaster with new fixes and features should be released. 
